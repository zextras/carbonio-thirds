pkgname="carbonio-icu"
pkgver="74.2" # renovate: datasource=github-releases depName=unicode-org/icu
pkgrel="2"
pkgdesc="International Components for Unicode library"
arch=('x86_64')
maintainer="Zextras <packages@zextras.com>"
url="https://github.com/zextras"
depends__apt=(
  "libc6"
  "bash"
)
depends__yum=(
  "glibc"
  "bash"
)
makedepends=(
  "python3"
)
section="libs"
priority="important"
source=(
  "https://github.com/unicode-org/icu/releases/download/release-74-2/icu4c-74_2-src.tgz"
)
sha256sums=('68db082212a96d6f53e35d60f47d38b962e9f9d207a74cfac78029ae8ff5e08c')

build() {
  cd "${srcdir}/icu"
  cd source
  export LDFLAGS="-Wl,-rpath,/opt/zextras/common/lib"
  ./configure --prefix=/opt/zextras/common \
    --sysconfdir=/opt/zextras/common/etc \
    --sbindir=/opt/zextras/common/bin
  make -j16
}

package() {
  cd "${srcdir}/icu"
  cd source
  make DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}/opt/zextras/common/share/man/"
}
