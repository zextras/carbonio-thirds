pkgname="carbonio-icu"
pkgver="69.1"
pkgrel="1"
pkgdesc="International Components for Unicode library"
arch=('x86_64')
maintainer="Zextras <packages@zextras.com>"
url="https://zextras.com"
depends__apt=(
  "libc6"
  "bash"
)
depends__yum=(
  "glibc"
  "bash"
)
makedepends=(
  "python3"
)
section="libs"
priority="important"
source=(
  "https://github.com/unicode-org/icu/releases/download/release-69-1/icu4c-69_1-src.tgz"
)
sha256sums=('4cba7b7acd1d3c42c44bb0c14be6637098c7faf2b330ce876bc5f3b915d09745')

build() {
  cd "${srcdir}/icu"
  cd source
  export LDFLAGS="-Wl,-rpath,/opt/zextras/common/lib"
  ./configure --prefix=/opt/zextras/common \
    --sysconfdir=/opt/zextras/common/etc \
    --sbindir=/opt/zextras/common/bin
  make -j16
}

package() {
  cd "${srcdir}/icu"
  cd source
  make -j1 DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}/opt/zextras/common/share/man/"
}
