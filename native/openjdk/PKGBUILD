targets=(
  "centos"
  "ubuntu"
)
pkgname="carbonio-openjdk"
pkgver="13.0.2"
pkgrel="1"
pkgdesc="OpenJDK Java 13 development kit"
pkgdesclong=(
  "OpenJDK Java 13 development kit"
)
arch="amd64"
maintainer="Zextras <packages@zextras.com"
url="https:/zextras.com"
section="utils"
priority="optional"
sources=(
  "https:/download.java.net/java/GA/jdk${pkgver}/d4173c853231432d94f001e99d882ca7/8/GPL/openjdk-${pkgver}_linux-x64_bin.tar.gz"
)
provides:yum=(
  "libjli.so()(64bit)"
)
hashsums=(
  "acc7a6aabced44e62ec3b83e3b5959df2b1aa6b3d610d58ee45f0c21a7821a71"
)

package() {
  cd "${srcdir}"
  mkdir -p "${pkgdir}"/opt/zextras/common/bin
  mkdir -p "${pkgdir}"/opt/zextras/common/lib/jvm
  cp -r "jdk-${pkgver}" "${pkgdir}"/opt/zextras/common/lib/jvm/java
  cd "${pkgdir}"/opt/zextras/common/lib/jvm/java
  mv include/linux/* include
  rm -rf include/linux
  rm -rf lib/src.zip
  rm -rf ../legal
  rm -rf demo
  rm -rf sample
  chmod 644 lib/ct.sym

  cd lib/security
  rm -f cacerts
  ln -s /opt/zextras/common/etc/java/cacerts cacerts
  
  cd "${pkgdir}"/opt/zextras/common/bin
  ln -s ../lib/jvm/java/bin/jar
  ln -s ../lib/jvm/java/bin/java
  ln -s ../lib/jvm/java/bin/javac
  ln -s ../lib/jvm/java/bin/javap
  ln -s ../lib/jvm/java/bin/jhat
  ln -s ../lib/jvm/java/bin/jmap
  ln -s ../lib/jvm/java/bin/jps
  ln -s ../lib/jvm/java/bin/jstack
  ln -s ../lib/jvm/java/bin/jstat
  ln -s ../lib/jvm/java/bin/keytool
}

