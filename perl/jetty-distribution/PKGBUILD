targets=(
  "centos"
  "ubuntu"
)
pkgname="carbonio-jetty-distribution"
pkgver="9.4.44.v20210927"
pkgrel="1"
pkgdesc="A pure Java-based HTTP server and Java Servlet container"
pkgdesclong=(
  "A pure Java-based HTTP server and Java Servlet container"
)
arch="amd64"
maintainer="Zextras <packages@zextras.com"
url="https://zextras.com"
depends=(
  "carbonio-jetty-distribution"
)
section="libs"
priority="important"
sources=(
  "https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/${pkgver}/jetty-distribution-${pkgver}.tar.gz"
)
hashsums=(
  "fdfd0d1e2732576c09246df8484ff7ed4aa4c84143927936934cb6b8e5194fa3"
)

package() {
  cd "${srcdir}/jetty-distribution-${pkgver}"
  # executables
  mkdir -p "${pkgdir}/opt/zextras/common/jetty_home"
  find -maxdepth 1 -mindepth 1 | grep -v -w -e debian -e rpm | xargs -r '-I{}' cp -a '{}' "${pkgdir}/opt/zextras/common/jetty_home"
  rm -rf "${pkgdir}/opt/zextras/common/jetty_home/demo-base"
  rm -rf "${pkgdir}/opt/zextras/common/jetty_home/lib/setuid/libsetuid-osx.so"
}
