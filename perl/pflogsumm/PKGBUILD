pkgname="carbonio-pflogsumm"
pkgver="1.1.6" # renovate: datasource=repology depName=arch/pflogsumm
pkgrel="1"
pkgdesc="Postfix log entry summarizer"
arch=('x86_64')
maintainer="Zextras <packages@zextras.com>"
url="https://github.com/zextras"
depends=(
  "carbonio-perl-date-calc"
)
section="libs"
priority="important"
source=(
  "https://jimsun.linxnet.com/downloads/pflogsumm-${pkgver}.tar.gz"
)
sha256sums=('5ccba9ec765720c79b9d8ae0f02e4c39f042d54e742a238ebb20b51a61915167')

package() {
  cd "${srcdir}/pflogsumm-${pkgver}"
  install -Dm755 pflogsumm \
    "${pkgdir}/opt/zextras/common/bin/pflogsumm"
  sed -i -e '/=head1 NAME/ i use lib qw(/opt/zextras/common/lib/perl5);' \
    "${pkgdir}"/opt/zextras/common/bin/pflogsumm
}
