pkgname="carbonio-spamassassin-rules"
pkgver="1.0"
pkgrel="2"
pkgdesc="Base class SAX Drivers and Filters"
arch=('x86_64')
maintainer="Zextras <packages@zextras.com>"
url="https://github.com/zextras"
depends__apt=(
  "carbonio-perl-mail-spamassassin"
  "perl"
)
depends__yum=(
  "carbonio-perl-mail-spamassassin"
  "perl"
  "perl-core"
)
section="libs"
priority="important"

package() {
  mkdir -p "${pkgdir}/opt/zextras/data/spamassassin/rules"
  /opt/zextras/common/bin/sa-update \
    --nogpg \
    --updatedir="${pkgdir}/opt/zextras/data/spamassassin/rules"

  cp "${pkgdir}"/opt/zextras/data/spamassassin/rules/updates_spamassassin_org/* \
    "${pkgdir}"/opt/zextras/data/spamassassin/rules

  rm -rf "${pkgdir}/opt/zextras/data/spamassassin/rules/updates_spamassassin_org" \
    "${pkgdir}/opt/zextras/data/spamassassin/rules/user_prefs.template"
}
