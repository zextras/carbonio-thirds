targets=(
  "centos"
  "ubuntu"
)
pkgname="carbonio-prepflog"
pkgver="0.4.1"
pkgrel="1"
pkgdesc="Pre-processor for pflogsumm"
pkgdesclong=(
  "Pre-processor for pflogsumm"
)
arch="amd64"
maintainer="Zextras <packages@zextras.com"
url="https://zextras.com"
depends=(
  "carbonio-perl-date-calc"
)
section="libs"
priority="important"
sources=(
  "https://github.com/johnfawcett/prepflog/archive/refs/tags/${pkgver}.tar.gz"
)
hashsums=(
  "21749ead0c1a258f67648d7e7300c47a47d6e8a42d9da82b85f197918fe9ea6f"
)

package() {
  cd "${srcdir}/prepflog-${pkgver}"
  install -D -m755 prepflog.pl \
    "${pkgdir}/opt/zextras/common/bin/prepflog"
  sed -i -e '/=pod/ i use lib qw(/opt/zextras/common/lib/perl5);' \
    "${pkgdir}"/opt/zextras/common/bin/prepflog
}
